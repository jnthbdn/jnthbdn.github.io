<!DOCTYPE html>
<html lang="fr">
    <head>
    <title>Hack t√©l√©commande climatiseur (Part 2) - Jnthbdn</title>
    
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"><meta name="description" content="Un endroit o√π l&#x27;on pourra un jour trouver une r√©ponse √† ses questions Hack t√©l√©commande climatiseur (Part 2) Une fois le principe de fonctionnement acquis, il temps de coder !"/><meta name="keywords" content="bidouille, √©lectronique, hack, climatiseur, Home Assistant, code, esp" />
    <meta property="og:title" content="Mon dernier side project -&nbsp;Hack t√©l√©commande climatiseur (Part 2)" />
    <meta property="og:type" content="website"/><meta property="og:url" content="https:&#x2F;&#x2F;jnthbdn.github.io&#x2F;hack-clim-part2&#x2F;"/><meta property="og:description" content="Une fois le principe de fonctionnement acquis, il temps de coder !"/>
    <link rel="preload" href="https://jnthbdn.github.io/assets/fonts/FiraCode-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    <link rel="preload" href="https://jnthbdn.github.io/assets/fonts/FiraCode-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">

    <link rel="stylesheet" href="https://jnthbdn.github.io/style.css?h=97e262212a0704163528">
    <link rel="stylesheet" href="https://jnthbdn.github.io/color/green.css?h=c685075d8d57bb1e0d87"><link rel="stylesheet" href="https://jnthbdn.github.io/custom.css?h=54c8541dfa5a34384d5a">
    
<link rel="alternate" type="application/atom+xml" title="Mon dernier side project RSS" href="https://jnthbdn.github.io/atom.xml">
  

  <link rel="stylesheet" href="https://jnthbdn.github.io/assets/katex/katex.min.css">

  <script defer type="text/javascript" src="https://jnthbdn.github.io/assets/katex/katex.min.js"></script>
  <script defer type="text/javascript" src="https://jnthbdn.github.io/assets/katex/mathtex-script-type.min.js"></script>

  <script defer src="https://jnthbdn.github.io/assets/katex/auto-render.min.js"
    onload="renderMathInElement(document.body, {
				delimiters: [
					{left: '$$', right: '$$', display: true},
					{left: '$', right: '$', display: false},
					{left: '\\(', right: '\\)', display: false},
					{left: '\\[', right: '\\]', display: true}
				]
			});"></script>


  </head>
    <body>
        <div class="container center">
<header class="header">
    <div class="header__inner">
        <div class="header__logo">
            <a href="&#x2F;">
    <div class="logo">
        Dernier side project
    </div>
</a>
        </div>
        <div class="menu-trigger">menu</div>
    </div>
    
    <nav class="menu">
        <ul class="menu__inner menu__inner--desktop">
            
            
                    <li>
                        <a href="
    
        https://jnthbdn.github.io
    
">Posts</a>
                    </li>
                
                    <li>
                        <a href="
    
        https://jnthbdn.github.io/about
    
">A Propos</a>
                    </li>
                
                    <li>
                        <a href="
    
        https://jnthbdn.github.io/search
    
">Rechercher</a>
                    </li>
                <ul class="menu__sub-inner">
                        <li class="menu__sub-inner-more-trigger">plus ‚ñæ</li>
                        <ul class="menu__sub-inner-more hidden">
                            
        <li>
            <a href="
    
        https://jnthbdn.github.io/categories
    
">Liste cat√©gories</a>
        </li>
        <li>
            <a href="
    
        https://jnthbdn.github.io/tags
    
">Liste #tags</a>
        </li>
                        </ul>
                    </ul>
            </ul>

        <ul class="menu__inner menu__inner--mobile">
            
        <li>
            <a href="
    
        https://jnthbdn.github.io
    
">Posts</a>
        </li>
        <li>
            <a href="
    
        https://jnthbdn.github.io/about
    
">A Propos</a>
        </li>
        <li>
            <a href="
    
        https://jnthbdn.github.io/search
    
">Rechercher</a>
        </li>
        <li>
            <a href="
    
        https://jnthbdn.github.io/categories
    
">Liste cat√©gories</a>
        </li>
        <li>
            <a href="
    
        https://jnthbdn.github.io/tags
    
">Liste #tags</a>
        </li>
        </ul>
    </nav>

    </header>
<div class="content"><article class="post">
        <header>
            <h1 class="post-title">
                <a href="https:&#x2F;&#x2F;jnthbdn.github.io&#x2F;hack-clim-part2&#x2F;">Hack t√©l√©commande climatiseur (Part 2)</a>
            </h1>
            
    <div class="post-meta">
        <span class="post-date">2023.09.10
                </span>

        <span class="post-author"></span>

        

    
    :: {<a href="https://jnthbdn.github.io/categories/bidouille/">bidouille</a>,
            <a href="https://jnthbdn.github.io/categories/electronique/">√©lectronique</a>} 

            
    ::
    #<a href="https://jnthbdn.github.io/tags/hack/">hack</a>
        
    #<a href="https://jnthbdn.github.io/tags/climatiseur/">climatiseur</a>
        
    #<a href="https://jnthbdn.github.io/tags/home-assistant/">Home Assistant</a>
        
    #<a href="https://jnthbdn.github.io/tags/code/">code</a>
        
    #<a href="https://jnthbdn.github.io/tags/esp/">esp</a>
        
    
            
        
    </div>

            
    


<div class="toc" id="nav-container">
	<p class="toc-head">Table of Contents</p>
		<div id="nav-content" >
		<ul>
		
			<li>
				<a href="https://jnthbdn.github.io/hack-clim-part2/#previously">Previously</a>
				
			</li>
		
			<li>
				<a href="https://jnthbdn.github.io/hack-clim-part2/#la-porteuse-ca-vous-dit">La porteuse... √ßa vous dit ?</a>
				
					<ul>
						
							<li>
								<a href="https://jnthbdn.github.io/hack-clim-part2/#pourquoi-utiliser-une-porteuse-en-infrarouge">Pourquoi utiliser une porteuse en Infrarouge ?</a>
							</li>
							
								<ul>
								
									<li>
										<a href="https://jnthbdn.github.io/hack-clim-part2/#cas-d-usage">Cas d&#x27;usage</a>
										
									</li>
								
									<li>
										<a href="https://jnthbdn.github.io/hack-clim-part2/#un-bain-de-lumiere">Un bain de lumi√®re</a>
										
									</li>
								
								</ul>
							
						
					</ul>
				
			</li>
		
			<li>
				<a href="https://jnthbdn.github.io/hack-clim-part2/#sortez-vos-esp-a-l-abordage-flag-black-skull-crossbones">Sortez vos ESP ! A l&#x27;abordage ! üè¥‚Äç‚ò†Ô∏è</a>
				
					<ul>
						
							<li>
								<a href="https://jnthbdn.github.io/hack-clim-part2/#generer-la-porteuse">G√©n√©rer la porteuse</a>
							</li>
							
						
							<li>
								<a href="https://jnthbdn.github.io/hack-clim-part2/#si-on-codait">Si on codait</a>
							</li>
							
								<ul>
								
									<li>
										<a href="https://jnthbdn.github.io/hack-clim-part2/#vous-reprendrez-bien-une-constante">Vous reprendrez bien une constante ?</a>
										
									</li>
								
									<li>
										<a href="https://jnthbdn.github.io/hack-clim-part2/#l-initialisation">L&#x27;initialisation</a>
										
									</li>
								
									<li>
										<a href="https://jnthbdn.github.io/hack-clim-part2/#on-off">On &#x2F; Off</a>
										
									</li>
								
									<li>
										<a href="https://jnthbdn.github.io/hack-clim-part2/#mode-de-ventilation">Mode de ventilation</a>
										
									</li>
								
									<li>
										<a href="https://jnthbdn.github.io/hack-clim-part2/#temperature">Temp√©rature</a>
										
									</li>
								
									<li>
										<a href="https://jnthbdn.github.io/hack-clim-part2/#feu">Feu !</a>
										
									</li>
								
								</ul>
							
						
					</ul>
				
			</li>
		
			<li>
				<a href="https://jnthbdn.github.io/hack-clim-part2/#pour-finir">Pour finir</a>
				
			</li>
		
		</ul>
		</div>
</div>

</header><h1 id="previously">Previously<a class="zola-anchor" href="#previously" aria-label="Anchor link for: previously">¬ß</a>
</h1>
<p>Dans <a href="https://jnthbdn.github.io/hack-clim-part1/">l'article pr√©c√©dent</a>, nous avons d√©couvert et d√©coder le protocole infrarouge utilis√© par la t√©l√©commande du climatiseur. Maintenant que l'on conna√Æt les bits et les octets √† modifier, il est temps de programmer notre ESP.</p>
<h1 id="la-porteuse-ca-vous-dit">La porteuse... √ßa vous dit ?<a class="zola-anchor" href="#la-porteuse-ca-vous-dit" aria-label="Anchor link for: la-porteuse-ca-vous-dit">¬ß</a>
</h1>
<p>Dans les oscillogrammes de l'article pr√©c√©dent, nous pouvions observer des signaux (haut ou bas) bien lisses. C'est extr√™mement pratique pour comprendre ce qui se passe et d√©coder les informations qui transitent, mais je dois vous avouer que ce n'est pas la r√©alit√© ! (<em>*tan   tan   tan*</em>).</p>
<p>Si l'on observe le signal produit par la LED on devrait obtenir quelque chose de beaucoup plus &quot;hach√©&quot;, on dit que le signal <strong>module la porteuse</strong>. Dans le cas de notre t√©l√©commande la porteuse est de 38kHz.</p>

  <figure >
    <a href="./img/bit.BMP" target="_blank">
    <img src="./img/bit.BMP" style="width: 75%;" />
    </a>
    
      <figcaption >1 bit sur une porteuse de 32kHz -- 1V&#x2F;div - 5ms&#x2F;div</figcaption>
    
  </figure>

<div class="encart">
    <div class="icon">
      
         üêû
        
      
    </div>
    <div class="content"><p>Il y a une petite erreur sur l'image... Je me suis plant√© en pla√ßant le curseur, le $\Delta T$ ne vaut pas 28¬µs mais 26¬µs.
$$
\Delta T = \frac{1}{Freq_{porteuse}} = \frac{1}{38000} \approx 0.000026316 \Rightarrow 26.3¬µs
$$</p>
</div>
</div><h2 id="pourquoi-utiliser-une-porteuse-en-infrarouge">Pourquoi utiliser une porteuse en Infrarouge ?<a class="zola-anchor" href="#pourquoi-utiliser-une-porteuse-en-infrarouge" aria-label="Anchor link for: pourquoi-utiliser-une-porteuse-en-infrarouge">¬ß</a>
</h2>
<p>Puisqu'il n'y a souvent qu'un seul &quot;unit√© int√©rieure&quot; de climatisation, il serait l√©gitime de se demander pourquoi se compliquer en utilisant une porteuse, alors qu'un signal direct pourrait tout aussi bien marcher.</p>
<h3 id="cas-d-usage">Cas d'usage<a class="zola-anchor" href="#cas-d-usage" aria-label="Anchor link for: cas-d-usage">¬ß</a>
</h3>
<p>Il y a deux cas (principaux) dans lesquels on veut utiliser une porteuse :</p>
<ol>
<li>La transmission par ondes √©lectromagn√©tiques : En utilisant la porteuse comme onde &quot;de transport&quot;, les caract√©ristiques de transmission (distance, puissance, ...) seront celles de la porteuse. Cela permettra aussi &quot;d'isoler&quot; la fr√©quence que l'on souhaite recevoir (par exemple la radio, la fr√©quence de la station est en r√©alit√© la porteuse).</li>
<li>La transmission de plusieurs informations via le m√™me support physique : En utilisant plusieurs porteuses, on peut, sans perte et sans collision (normalement), transmettre plusieurs informations diff√©rentes en m√™me temps (par exemple, pour les vieux, la t√©l√©vision par c√¢ble. Un seul c√¢ble, mais plusieurs cha√Ænes)</li>
</ol>
<p>Dit comme √ßa, l'utilit√© ne semble pas tr√®s claire... Pourtant, dans en infrarouge, plus pr√©cis√©ment dans le contexte qui est le n√¥tre, c'est le cas n¬∞1 qui nous int√©resse.</p>
<h3 id="un-bain-de-lumiere">Un bain de lumi√®re<a class="zola-anchor" href="#un-bain-de-lumiere" aria-label="Anchor link for: un-bain-de-lumiere">¬ß</a>
</h3>
<p>L'infrarouge, je ne vous apprends rien, est de la lumi√®re. Pour aller un peu plus dans les d√©tails, le spectre IR est tr√®s large, tellement large qu'on l'a d√©coup√© en trois <strong>r√©gions</strong><sup class="footnote-reference"><a href="#1">1</a></sup> en fonction de leurs longueurs d'ondes :</p>
<ul>
<li>Infrarouge <em>proche</em> : de 0.78¬µm √† 3¬µm</li>
<li>Infrarouge <em>moyen</em> : de 3¬µm √† 50¬µm</li>
<li>Infrarouge <em>lointain</em> : de 50¬µm √† 5mm üò≥</li>
</ul>
<div class="encart">
    <div class="icon">
      
        ‚ÑπÔ∏è
        
      
    </div>
    <div class="content"><p>Pour rappel, la lumi√®re est une onde (<em>doucement les physiciens ! Je simplifie...</em>), et comme toutes les ondes, elles ont une <strong>fr√©quence</strong>. La fr√©quence est le <strong>nombre de fois</strong> qu'un signal se r√©p√®te pendant <em>1 seconde</em> (100 Hz =&gt; 100 r√©p√©titions par secondes). Mais on peut aussi exprimer la <strong>longueur d'onde</strong> qui est le <strong>temps</strong> entre deux r√©p√©titions. </p>
<p>√Ä mesure que la fr√©quence augmente, la longueur d'onde diminue.</p>

  <figure  class="center">
    <a href="./img/sine_waves_wiki.svg" target="_blank">
    <img src="./img/sine_waves_wiki.svg" style="width: 480px;" />
    </a>
    
      <figcaption >Exemple d&#x27;ondes du spectre visible (Rouge: 750nm, Orange: 620nm, Vert: 520nm, Bleu: 470nm, Violet: 380nm)</figcaption>
    
  </figure>

<table><thead><tr><th>Couleur</th><th>Longueur d'Onde</th><th>Fr√©quence</th></tr></thead><tbody>
<tr><td>Rouge</td><td>~ 750 nm</td><td>~ 400 THz</td></tr>
<tr><td>Orange</td><td>~ 620 nm</td><td>~ 480 THz</td></tr>
<tr><td>Vert</td><td>~ 520 nm</td><td>~ 580 THz</td></tr>
<tr><td>Bleu</td><td>~ 470 nm</td><td>~ 640 THz</td></tr>
<tr><td>Violet</td><td>~ 380 nm</td><td>~ 790 THz</td></tr>
</tbody></table>
</div>
</div>
<p>Quasiment tout ce qui √©met de la lumi√®re, y compris le soleil, produit des infrarouges, en plus ou moins grande quantit√©. Lorsque notre signal est √©mis, il se trouve immerg√© dans un environnement rempli d'infrarouges. Le d√©fi r√©side alors, pour le r√©cepteur, dans la diff√©renciation de notre signal par rapport au <em>bruit</em> ambiant.</p>
<p>La m√©thode la plus simple consiste √† appliquer une technique similaire √† celle utilis√©e en √©mission radio, en utilisant une porteuse. Le r√©cepteur peut ainsi distinguer les informations du signal parmi le bruit en cherchant une fr√©quence de 38 kHz. Cette fr√©quence de 38 kHz sert de r√©f√©rence pour s√©parer le <em>signal</em> d'int√©r√™t du fond infrarouge, permettant ainsi au r√©cepteur de reconna√Ætre et de traiter correctement les donn√©es transmises.</p>
<h1 id="sortez-vos-esp-a-l-abordage-flag-black-skull-crossbones">Sortez vos ESP ! A l'abordage ! üè¥‚Äç‚ò†Ô∏è<a class="zola-anchor" href="#sortez-vos-esp-a-l-abordage-flag-black-skull-crossbones" aria-label="Anchor link for: sortez-vos-esp-a-l-abordage-flag-black-skull-crossbones">¬ß</a>
</h1>
<h2 id="generer-la-porteuse">G√©n√©rer la porteuse<a class="zola-anchor" href="#generer-la-porteuse" aria-label="Anchor link for: generer-la-porteuse">¬ß</a>
</h2>
<p>Bien ! Commen√ßons par le plus simple. La porteuse est donc un signal carr√©, de fr√©quence 38kHz (pour la 30e fois). On pourrait prendre un NE555 ‚ù§Ô∏è, deux r√©sistances de 4 ohms et un condensateur de 4.8 ¬µF... Oui ce sera bien... Mais je vous propose d'utiliser le <a rel="noopener" target="_blank" href="https://fr.wikipedia.org/wiki/Modulation_de_largeur_d%27impulsion">PWM</a> de l'ESP, c'est plus simple est √ßa marche tout aussi bien...</p>
<p>Le fonctionnement est tr√®s simple, on va r√©gler la fr√©quence du PWM sur la valeur de notre porteuse et le <a rel="noopener" target="_blank" href="https://fr.wikipedia.org/wiki/Rapport_cyclique">rapport cyclique</a> √† 50%. En utilisant un transistor, on pourra &quot;allumer&quot; ou &quot;√©teindre&quot; notre LED, sans nous soucier de la porteuse.</p>

  <figure >
    <a href="./img/schema.png" target="_blank">
    <img src="./img/schema.png" style="width: 75%;" />
    </a>
    
      <figcaption >Schematique simplifi√© de la LED IR</figcaption>
    
  </figure>

<h2 id="si-on-codait">Si on codait<a class="zola-anchor" href="#si-on-codait" aria-label="Anchor link for: si-on-codait">¬ß</a>
</h2>
<p>On ne va traiter &quot;que&quot; la partie t√©l√©commande. Le code permettant la connexion au WiFi, ou sa configuration ne vont pas √™tre trait√©s ici. De plus, le code √©tant assez long je ne vais pas le d√©tailler en totalit√©, je vais juste m'attarder sur quelques points que je trouve important. Je vous invite √† regarder le code, disponible sur GitHub: <a rel="noopener" target="_blank" href="https://github.com/jnthbdn/esp_clim_controller/blob/main/src/panasonic_remote.h">https://github.com/jnthbdn/esp_clim_controller/blob/main/src/panasonic_remote.h</a></p>
<h3 id="vous-reprendrez-bien-une-constante">Vous reprendrez bien une constante ?<a class="zola-anchor" href="#vous-reprendrez-bien-une-constante" aria-label="Anchor link for: vous-reprendrez-bien-une-constante">¬ß</a>
</h3>
<pre data-lang="c++" style="background-color:#191919;color:#ffffff;" class="language-c++ "><code class="language-c++" data-lang="c++"><span style="color:#80d500;">constexpr unsigned long</span><span style="color:#cccccc;"> STOP_BIT_LOW_TIME  </span><span>= </span><span style="color:#eddd5a;">10000</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">
</span><span style="color:#80d500;">constexpr unsigned long</span><span style="color:#cccccc;"> START_BIT_HIGH_TIME </span><span>= </span><span style="color:#eddd5a;">3500</span><span style="color:#cccccc;">;
</span><span style="color:#80d500;">constexpr unsigned long</span><span style="color:#cccccc;"> START_BIT_LOW_TIME  </span><span>= </span><span style="color:#eddd5a;">1700</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">
</span><span style="color:#80d500;">constexpr unsigned long</span><span style="color:#cccccc;"> BIT_HIGH_TIME  </span><span>= </span><span style="color:#eddd5a;">430</span><span style="color:#cccccc;">;
</span><span style="color:#80d500;">constexpr unsigned long</span><span style="color:#cccccc;"> BIT_LOW_0_TIME </span><span>= </span><span style="color:#eddd5a;">440</span><span style="color:#cccccc;">;
</span><span style="color:#80d500;">constexpr unsigned long</span><span style="color:#cccccc;"> BIT_LOW_1_TIME </span><span>= </span><span style="color:#eddd5a;">1300</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">
</span><span style="color:#80d500;">constexpr </span><span style="color:#8aa6c1;">uint8_t</span><span style="color:#cccccc;"> PANASONIC_DATA_SIZE </span><span>= </span><span style="color:#eddd5a;">27</span><span style="color:#cccccc;">;
</span></code></pre>
<p>Depuis que <code>constexpr</code> existe, je ne sais pas comment j'ai fait pour m'en passer...(<em>s√ªrement avec des <code>#define</code></em>...).<br />
On d√©clare les temps de chacun des &quot;bit&quot; dont on va avoir besoin pour √©mettre un message. Notez que l'on pourrait se passer de <code>BIT_HIGH_TIME</code> puisqu'il est quasiment √©gal √† <code>BIT_LOW_0_TIME</code>, mais je trouve que √ßa rend le code (qui arrive) plus lisible et on identifie plus facilement l'√©tape de transmission en cours.</p>
<p>La derni√®re constante <code>PANASONIC_DATA_SIZE</code> nous servira pour les it√©rations, cela √©vite d'avoir des &quot;magic number&quot;<sup class="footnote-reference"><a href="#2">2</a></sup> qui se baladent dans le code.</p>
<h3 id="l-initialisation">L'initialisation<a class="zola-anchor" href="#l-initialisation" aria-label="Anchor link for: l-initialisation">¬ß</a>
</h3>
<pre data-lang="c++" style="background-color:#191919;color:#ffffff;" class="language-c++ "><code class="language-c++" data-lang="c++"><span style="color:#cccccc;">PanasonicRemote(byte pin_pwm, byte pin_led) </span><span>: </span><span style="color:#cccccc;">pin_pwm{pin_pwm}, pin_led{pin_led}, data{ </span><span style="color:#80d500;">new </span><span style="color:#8aa6c1;">uint8_t</span><span style="color:#cccccc;">[PANASONIC_DATA_SIZE] }{
</span><span style="color:#cccccc;">    </span><span style="background-color:#171717;color:#616161;">// Header
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">0</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b00000010</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">1</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b00100000</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">2</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b11100000</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">3</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b00000100</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">4</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b00000000</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">5</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b00000000</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">6</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b00000000</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">7</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b00000110</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">
</span><span style="color:#cccccc;">    </span><span style="background-color:#171717;color:#616161;">// Body
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">8</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b00000010</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">9</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b00100000</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">10</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b11100000</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">11</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b00000100</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">12</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b00000000</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">13</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b00001000</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">14</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b00110010</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">15</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b10000000</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">16</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b10101111</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">17</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b00000000</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">18</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b00000000</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">29</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b00001110</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">20</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b11100000</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">21</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b00000000</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">22</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b00000000</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">23</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b10001001</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">24</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b00000000</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">25</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b00000000</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    data[</span><span style="color:#eddd5a;">26</span><span style="color:#cccccc;">] </span><span>= </span><span style="color:#eddd5a;">0b11100110</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">}
</span><span style="color:#cccccc;">
</span><span style="color:#80d500;">void </span><span>init</span><span style="color:#cccccc;">(){
</span><span style="color:#cccccc;">    analogWriteRange(</span><span style="color:#eddd5a;">1024</span><span style="color:#cccccc;">);
</span><span style="color:#cccccc;">    analogWriteFreq(</span><span style="color:#eddd5a;">38000</span><span style="color:#cccccc;">);
</span><span style="color:#cccccc;">    pinMode(pin_pwm, OUTPUT);
</span><span style="color:#cccccc;">    analogWrite(pin_pwm, </span><span style="color:#eddd5a;">512</span><span style="color:#cccccc;">);
</span><span style="color:#cccccc;">    pinMode(pin_led, OUTPUT);
</span><span style="color:#cccccc;">    digitalWrite(pin_led, LOW);
</span><span style="color:#cccccc;">}
</span></code></pre>
<p>Le gros &quot;constructeur&quot; ne fait pas grand chose √† part initialiser nos variables. On remarque que les donn√©es de trames, par d√©faut, sont:</p>
<ul>
<li>√âtat : OFF</li>
<li>Temp√©rature: 25.0¬∞C</li>
<li>Mode: AUTO</li>
</ul>
<p>Et voici <code>init</code>, la fonction qui met en place la porteuse. Pour ne pas avoir de mauvaise blague on se met d'accord sur le &quot;range&quot; (la plage) de valeurs utilis√©es pour d√©finir le duty cycle du PWM avec <code>analogWriteRange</code>. Je prends <code>1024</code> pour deux raisons:</p>
<ol>
<li>Par pure convention et parce que j'ai l'habitude.</li>
<li>Potentiellement on peut vouloir utiliser le PWM ailleurs dans le projet, donc autant garder une plage de valeur correcte.</li>
</ol>
<p>Il faut donc utiliser la valeur <code>512</code> pour mettre le duty cycle √† 50% (et 0 pour le mettre √† 0%, j'esp√®re que vous suivez).</p>
<p>Il nous reste √† pr√©ciser la valeur de la fr√©quence avec <code>analogWriteFreq</code>. Les autres fonctions param√®trent les pin en sortie, et leurs valeurs par d√©fauts.</p>
<h3 id="on-off">On / Off<a class="zola-anchor" href="#on-off" aria-label="Anchor link for: on-off">¬ß</a>
</h3>
<pre data-lang="c++" style="background-color:#191919;color:#ffffff;" class="language-c++ "><code class="language-c++" data-lang="c++"><span style="color:#cccccc;">PanasonicRemote</span><span>&amp; turnOn</span><span style="color:#cccccc;">(){
</span><span style="color:#cccccc;">    setBit(</span><span style="color:#eddd5a;">13</span><span style="color:#cccccc;">, </span><span style="color:#eddd5a;">0</span><span style="color:#cccccc;">);
</span><span style="color:#cccccc;">    compute_checksum(); 
</span><span style="color:#cccccc;">    </span><span style="color:#80d500;">return </span><span>*</span><span style="color:#cccccc;">this;
</span><span style="color:#cccccc;">}
</span><span style="color:#cccccc;">
</span><span style="color:#cccccc;">PanasonicRemote</span><span>&amp; turnOff</span><span style="color:#cccccc;">(){
</span><span style="color:#cccccc;">    setStreamMode(StreamMode::AUTO);    </span><span style="background-color:#171717;color:#616161;">// M√™me comportement que la t√©l√©command d&#39;origine
</span><span style="color:#cccccc;">    clearBit(</span><span style="color:#eddd5a;">13</span><span style="color:#cccccc;">, </span><span style="color:#eddd5a;">0</span><span style="color:#cccccc;">);
</span><span style="color:#cccccc;">    compute_checksum();
</span><span style="color:#cccccc;">    </span><span style="color:#80d500;">return </span><span>*</span><span style="color:#cccccc;">this;
</span><span style="color:#cccccc;">}
</span></code></pre>
<p>Pour d√©finir l'√©tat (on ou off) de la climatisation j'ai pris le parti de faire deux fonctions (qui retournent l'objet lui-m√™me pour &quot;cha√Æner&quot; les appels si on le souhaite). Dans le but de simplifier le code (tant en lecture, qu'en √©criture), j'utlise <code>clearBit</code> et <code>setBit</code> pour, respectivement, forcer un bit √† 0 ou a 1, pour un octet donn√©.</p>
<p>Apr√®s chaque modification de la trame on doit recalculer le 'checksum', c'est le r√¥le de <code>compute_checksum</code>, que l'on verra un peu plus tard.</p>
<p>Les plus observateurs d'entre vous, auront remarqu√© une ligne en plus dans <code>turnOff</code>. Comme dit dans la partie 1, la t√©l√©commande repasse le mode de ventilation en <code>AUTO</code>, c'est tr√®s certainement pour ne pas qu'il reste activ√© en permanence, je le d√©sactive donc moi aussi, par pr√©caution.</p>
<h3 id="mode-de-ventilation">Mode de ventilation<a class="zola-anchor" href="#mode-de-ventilation" aria-label="Anchor link for: mode-de-ventilation">¬ß</a>
</h3>
<pre data-lang="c++" style="background-color:#191919;color:#ffffff;" class="language-c++ "><code class="language-c++" data-lang="c++"><span style="color:#cccccc;">PanasonicRemote</span><span>&amp; setStreamMode</span><span style="color:#cccccc;">(StreamMode </span><span style="font-style:italic;color:#8aa6c1;">mode</span><span style="color:#cccccc;">){
</span><span style="color:#cccccc;">
</span><span style="color:#cccccc;">    </span><span style="color:#80d500;">switch</span><span style="color:#cccccc;">(mode){
</span><span style="color:#cccccc;">        </span><span style="color:#80d500;">case</span><span style="color:#cccccc;"> StreamMode::POWERFULL:
</span><span style="color:#cccccc;">            clearBit(</span><span style="color:#eddd5a;">21</span><span style="color:#cccccc;">, </span><span style="color:#eddd5a;">5</span><span style="color:#cccccc;">);
</span><span style="color:#cccccc;">            setBit(</span><span style="color:#eddd5a;">21</span><span style="color:#cccccc;">, </span><span style="color:#eddd5a;">0</span><span style="color:#cccccc;">);
</span><span style="color:#cccccc;">            </span><span style="color:#80d500;">break</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">        
</span><span style="color:#cccccc;">        </span><span style="color:#80d500;">case</span><span style="color:#cccccc;"> StreamMode::QUIET:
</span><span style="color:#cccccc;">            clearBit(</span><span style="color:#eddd5a;">21</span><span style="color:#cccccc;">, </span><span style="color:#eddd5a;">0</span><span style="color:#cccccc;">);
</span><span style="color:#cccccc;">            setBit(</span><span style="color:#eddd5a;">21</span><span style="color:#cccccc;">, </span><span style="color:#eddd5a;">5</span><span style="color:#cccccc;">);
</span><span style="color:#cccccc;">            </span><span style="color:#80d500;">break</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">        
</span><span style="color:#cccccc;">        </span><span style="color:#80d500;">default</span><span style="color:#cccccc;">:
</span><span style="color:#cccccc;">        </span><span style="color:#80d500;">case</span><span style="color:#cccccc;"> StreamMode::AUTO:
</span><span style="color:#cccccc;">            clearBit(</span><span style="color:#eddd5a;">21</span><span style="color:#cccccc;">, </span><span style="color:#eddd5a;">5</span><span style="color:#cccccc;">);
</span><span style="color:#cccccc;">            clearBit(</span><span style="color:#eddd5a;">21</span><span style="color:#cccccc;">, </span><span style="color:#eddd5a;">0</span><span style="color:#cccccc;">);
</span><span style="color:#cccccc;">            </span><span style="color:#80d500;">break</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">    }
</span><span style="color:#cccccc;">    
</span><span style="color:#cccccc;">    compute_checksum();
</span><span style="color:#cccccc;">    </span><span style="color:#80d500;">return </span><span>*</span><span style="color:#cccccc;">this;
</span><span style="color:#cccccc;">}
</span></code></pre>
<p>Il n'y a rien de particulier dans le code, juste une <code>enum</code> qui permet d'assurer que l'utilisateur ne fasse pas (inconsciemment du moins) de b√™tise.</p>
<h3 id="temperature">Temp√©rature<a class="zola-anchor" href="#temperature" aria-label="Anchor link for: temperature">¬ß</a>
</h3>
<pre data-lang="c++" style="background-color:#191919;color:#ffffff;" class="language-c++ "><code class="language-c++" data-lang="c++"><span style="color:#cccccc;">PanasonicRemote</span><span>&amp; setTemperature</span><span style="color:#cccccc;">(</span><span style="color:#8aa6c1;">uint8_t </span><span style="font-style:italic;color:#8aa6c1;">temp</span><span style="color:#cccccc;">, </span><span style="color:#80d500;">bool </span><span style="font-style:italic;color:#8aa6c1;">half</span><span style="color:#cccccc;">){
</span><span style="color:#cccccc;">
</span><span style="color:#cccccc;">    </span><span style="color:#80d500;">if</span><span style="color:#cccccc;">( </span><span style="color:#eddd5a;">16 </span><span>&lt;=</span><span style="color:#cccccc;"> temp </span><span>&amp;&amp;</span><span style="color:#cccccc;"> temp </span><span>&lt;= </span><span style="color:#eddd5a;">30</span><span style="color:#cccccc;">){
</span><span style="color:#cccccc;">
</span><span style="color:#cccccc;">        data[</span><span style="color:#eddd5a;">14</span><span style="color:#cccccc;">] </span><span>&amp;= </span><span style="color:#eddd5a;">0b11000001</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">        data[</span><span style="color:#eddd5a;">14</span><span style="color:#cccccc;">] </span><span>|=</span><span style="color:#cccccc;"> temp </span><span>&lt;&lt; </span><span style="color:#eddd5a;">1</span><span style="color:#cccccc;">;
</span><span style="color:#cccccc;">
</span><span style="color:#cccccc;">        </span><span style="color:#80d500;">if</span><span style="color:#cccccc;">( half </span><span>&amp;&amp;</span><span style="color:#cccccc;"> temp </span><span>&lt; </span><span style="color:#eddd5a;">30</span><span style="color:#cccccc;">){
</span><span style="color:#cccccc;">            setBit(</span><span style="color:#eddd5a;">14</span><span style="color:#cccccc;">, </span><span style="color:#eddd5a;">0</span><span style="color:#cccccc;">);
</span><span style="color:#cccccc;">            compute_checksum();
</span><span style="color:#cccccc;">        }
</span><span style="color:#cccccc;">        </span><span style="color:#80d500;">else</span><span style="color:#cccccc;">{
</span><span style="color:#cccccc;">            clearBit(</span><span style="color:#eddd5a;">14</span><span style="color:#cccccc;">, </span><span style="color:#eddd5a;">0</span><span style="color:#cccccc;">);
</span><span style="color:#cccccc;">            compute_checksum();
</span><span style="color:#cccccc;">        }
</span><span style="color:#cccccc;">    }
</span><span style="color:#cccccc;">    </span><span style="color:#80d500;">return </span><span>*</span><span style="color:#cccccc;">this;
</span><span style="color:#cccccc;">}
</span></code></pre>
<p>Le r√©glage de la temp√©rature ne se limite pas √† un simple bit, comme pour les autres r√©glages, c'est un petit peu plus subtil. D√©j√†, il faut s'assurer que la temp√©rature est correcte, c'est la responsabilit√© de la ligne <code>if( 16 &lt;= temp &amp;&amp; temp &lt;= 30)</code>. Si la temp√©rature n'est pas bonne, alors on ne fait rien, on ignore la demande. Dans le cas contraire, on commence par &quot;effacer&quot; la temp√©rature enregistr√©e <code>data[14] &amp;= 0b11000001;</code> effectue un &quot;et logique&quot; afin de forcer les bits 6 √† 2 au niveau logique 0. Puis on enregistre la valeur <strong>enti√®re</strong> de la temp√©rature avec <code>data[14] |= temp &lt;&lt; 1;</code> (<code>&lt;&lt;</code> signifie que l'on d√©cale d'un bit vers la <em>gauche</em>). Reste en ensuite √† g√©rer le &quot;demi&quot;, mais seulement si la valeur est strictement inf√©rieure √† 30¬∞C.</p>
<h3 id="feu">Feu !<a class="zola-anchor" href="#feu" aria-label="Anchor link for: feu">¬ß</a>
</h3>
<pre data-lang="c++" style="background-color:#191919;color:#ffffff;" class="language-c++ "><code class="language-c++" data-lang="c++"><span style="color:#80d500;">void </span><span>send</span><span style="color:#cccccc;">(){
</span><span style="color:#cccccc;">    
</span><span style="color:#cccccc;">    start_bit();
</span><span style="color:#cccccc;">
</span><span style="color:#cccccc;">    </span><span style="background-color:#171717;color:#616161;">// Header
</span><span style="color:#cccccc;">    </span><span style="color:#80d500;">for</span><span style="color:#cccccc;">( </span><span style="color:#80d500;">unsigned</span><span style="color:#cccccc;"> octet </span><span>= </span><span style="color:#eddd5a;">0</span><span style="color:#cccccc;">; octet </span><span>&lt; </span><span style="color:#eddd5a;">8</span><span style="color:#cccccc;">; </span><span>++</span><span style="color:#cccccc;">octet ){
</span><span style="color:#cccccc;">        </span><span style="color:#80d500;">for</span><span style="color:#cccccc;">( </span><span style="color:#80d500;">unsigned</span><span style="color:#cccccc;"> bit </span><span>= </span><span style="color:#eddd5a;">0</span><span style="color:#cccccc;">; bit </span><span>&lt; </span><span style="color:#eddd5a;">8</span><span style="color:#cccccc;">; bit</span><span>++ </span><span style="color:#cccccc;">){
</span><span style="color:#cccccc;">            set_high();
</span><span style="color:#cccccc;">            delayMicroseconds(BIT_HIGH_TIME);
</span><span style="color:#cccccc;">            set_low();
</span><span style="color:#cccccc;">
</span><span style="color:#cccccc;">            </span><span style="color:#80d500;">if</span><span style="color:#cccccc;">( (data[octet] </span><span>&amp; </span><span style="color:#cccccc;">(</span><span style="color:#eddd5a;">1 </span><span>&lt;&lt;</span><span style="color:#cccccc;"> bit)) </span><span>&gt; </span><span style="color:#eddd5a;">0 </span><span style="color:#cccccc;">)
</span><span style="color:#cccccc;">                delayMicroseconds(BIT_LOW_1_TIME);
</span><span style="color:#cccccc;">            </span><span style="color:#80d500;">else
</span><span style="color:#cccccc;">                delayMicroseconds(BIT_LOW_0_TIME);
</span><span style="color:#cccccc;">        }
</span><span style="color:#cccccc;">    }
</span><span style="color:#cccccc;">
</span><span style="color:#cccccc;">    stop_bit();
</span><span style="color:#cccccc;">    start_bit();
</span><span style="color:#cccccc;">
</span><span style="color:#cccccc;">    </span><span style="background-color:#171717;color:#616161;">// Body
</span><span style="color:#cccccc;">    </span><span style="color:#80d500;">for</span><span style="color:#cccccc;">( </span><span style="color:#80d500;">unsigned</span><span style="color:#cccccc;"> octet </span><span>= </span><span style="color:#eddd5a;">8</span><span style="color:#cccccc;">; octet </span><span>&lt;</span><span style="color:#cccccc;"> PANASONIC_DATA_SIZE; </span><span>++</span><span style="color:#cccccc;">octet ){
</span><span style="color:#cccccc;">        </span><span style="color:#80d500;">for</span><span style="color:#cccccc;">( </span><span style="color:#80d500;">unsigned</span><span style="color:#cccccc;"> bit </span><span>= </span><span style="color:#eddd5a;">0</span><span style="color:#cccccc;">; bit </span><span>&lt; </span><span style="color:#eddd5a;">8</span><span style="color:#cccccc;">; bit</span><span>++ </span><span style="color:#cccccc;">){
</span><span style="color:#cccccc;">            set_high();
</span><span style="color:#cccccc;">            delayMicroseconds(BIT_HIGH_TIME);
</span><span style="color:#cccccc;">            set_low();
</span><span style="color:#cccccc;">
</span><span style="color:#cccccc;">            </span><span style="color:#80d500;">if</span><span style="color:#cccccc;">( (data[octet] </span><span>&amp; </span><span style="color:#cccccc;">(</span><span style="color:#eddd5a;">1 </span><span>&lt;&lt;</span><span style="color:#cccccc;"> bit)) </span><span>&gt; </span><span style="color:#eddd5a;">0 </span><span style="color:#cccccc;">)
</span><span style="color:#cccccc;">                delayMicroseconds(BIT_LOW_1_TIME);
</span><span style="color:#cccccc;">            </span><span style="color:#80d500;">else
</span><span style="color:#cccccc;">                delayMicroseconds(BIT_LOW_0_TIME);
</span><span style="color:#cccccc;">        }
</span><span style="color:#cccccc;">    }
</span><span style="color:#cccccc;">
</span><span style="color:#cccccc;">    stop_bit();
</span><span style="color:#cccccc;">}
</span><span style="color:#cccccc;">
</span><span style="background-color:#171717;color:#616161;">// [...]
</span><span style="color:#cccccc;">
</span><span style="color:#80d500;">inline void </span><span>set_high</span><span style="color:#cccccc;">(){
</span><span style="color:#cccccc;">    digitalWrite(pin_led, HIGH);
</span><span style="color:#cccccc;">}
</span><span style="color:#cccccc;">
</span><span style="color:#80d500;">inline void </span><span>set_low</span><span style="color:#cccccc;">(){
</span><span style="color:#cccccc;">    digitalWrite(pin_led, LOW);
</span><span style="color:#cccccc;">}
</span></code></pre>
<p>Tout ce qui nous reste √† faire maintenant, c'est d'envoyer nos param√®tres. Comme toutes les trames on doit envoyer notre &quot;bit de start&quot; pour pr√©venir le r√©cepteur que l'on va envoyer des donn√©es, c'est <code>start_bit</code> qui s'en charge. Les premi√®res donn√©es transmises sont celles du header, soit les 8 premiers octets de notre trame. On remarque l'utilisation de <code>set_high</code> et <code>set_low</code> qui ne sont pr√©sentes que pour rendre le code plus lisible. On retrouve nos constantes de temps que nous avons d√©clar√©es au d√©but du programme.</p>
<p>Une fois le header transmit c'est au tour du body, mais avant cela il faut marqu√© la fin de cette premi√®re partie, on emet un &quot;bit de stop&quot; suivi d'un &quot;bit de start&quot;. Puis, en suivant la m√™me proc√©dure, on envoie le reste de la trame.</p>
<h1 id="pour-finir">Pour finir<a class="zola-anchor" href="#pour-finir" aria-label="Anchor link for: pour-finir">¬ß</a>
</h1>
<p>Maintenant que nous avons une classe qui permet de produire et d'√©mettre les trames pour contr√¥ler notre climatiseur, il ne reste plus qu'√† l'utiliser comme bon nous semble ! Pour ma part il sera contr√¥l√© via une API Web mise a disposition par l'ESP. Cette m√™me API sera utilis√©e par HomeAssistant.</p>
<p>Retrouvez le projet PlatformIO sur mon <a rel="noopener" target="_blank" href="https://github.com/jnthbdn/esp_clim_controller">GitHub</a>.</p>
<p class="right">Bidouillez-bien</p>
<hr />
<div class="footnote-definition" id="1"><sup class="footnote-definition-label">1</sup>
<p>D'apr√®s l'ISO 20473:2007. <a rel="noopener" target="_blank" href="https://fr.wikipedia.org/wiki/Infrarouge#D%C3%A9coupage_ISO">Source</a></p>
</div>
<div class="footnote-definition" id="2"><sup class="footnote-definition-label">2</sup>
<p>Des valeurs non nomm√©es, et dont il peut √™tre difficile de conna√Ætre la signification ou la raison de leurs utilisations. <a rel="noopener" target="_blank" href="https://fr.wikipedia.org/wiki/Nombre_magique_(programmation)#Constantes_num%C3%A9riques_non_nomm%C3%A9es">Source</a></p>
</div>


        
    
        

    <div id="disqus_thread"></div>
    <script>
        /**
        *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
        *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
        
        var disqus_config = function () {
            this.page.url = 'https://jnthbdn.github.io/hack-clim-part2/';  // Replace PAGE_URL with your page's canonical URL variable
            this.page.identifier = 'https://jnthbdn.github.io/hack-clim-part2/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
        };
        
        (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = 'https://jnthbdn-github-io.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


    

        
        
    </article></div>
    <div class="pagination">
        <div class="pagination__buttons">
            </div>
    </div>
<footer class="footer">
                    <div class="footer__inner"><div class="copyright copyright--user"><span>Powered by <a href="https://www.getzola.org/">Zola</a></span><span>:: Theme made by <a href="https://github.com/ejmg">ejmg</a></span></div>
    <script type="text/javascript" src="https://jnthbdn.github.io/assets/js/main.js"></script>
</div>
                    
<p class="center">Retrouvez ce blog sur <a href="https://github.com/jnthbdn/jnthbdn.github.io">GitHub</a></p>
<script src="https://jnthbdn.github.io/elasticlunr.min.js"></script>
<script src="https://jnthbdn.github.io/lunr.stemmer.support.js"></script>
<script src="https://jnthbdn.github.io/lunr.fr.js"></script>
<script src="https://jnthbdn.github.io/search_index.fr.js"></script>
<script src="https://jnthbdn.github.io/search.js"></script>

                </footer></div>
    </body>
</html>
